import{n as e,f as t,w as a,i as s,o,a as i,c as l,r as d,F as c,g as r,b as n,S as h,k as u,d as m,t as p,j as v}from"./index-BG5oA973.js";import{_ as f,d as y,e as _}from"./_plugin-vue_export-helper.Dl8SAmEZ.js";import{_ as g}from"./search.HyvIfahN.js";const w=f({data:()=>({videoList:[],selectedItems:{duration:"全部",video_type:"全部",year:"全部",month:"全部"},videoType:{},page:1,cover:""}),methods:{async loadVideoData(){this.videoType=await y();for(const i in this.videoType)this.videoType[i].unshift("全部");for(let i=1;i<this.videoType.month.length;i++)this.videoType.month[i]=`${this.videoType.month[i]}月`;if(this.videoType.duration=["全部","0-10分钟","10-30分钟","30分钟以上"],this.videoList.length>=this.total&&0!==this.total)return;const{duration:e,video_type:t,year:a,month:s}=this.selectedItems,o=await _("全部"===e?[]:{"全部":[],"0-10分钟":["s"],"10-30分钟":["m"],"30分钟以上":["l"]}[e],"全部"===t?[]:[t],"全部"===a?[]:[a],"全部"===s?[]:[s.substring(0,s.length-1)],this.page);this.total=o.total,this.videoList=this.videoList.concat(o.data),this.page++},handlePress(e,t){this.selectedItems[e]=t,this.videoList=[],this.page=1,this.loadVideoData()},formatDate(e){const t=new Date(e);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`},getVideoFrame:(e,t)=>`//www.bilibili.com/blackboard/html5mobileplayer.html?bvid=${e}&cid=${t}`,goToVideoDetail(e){window.open(`https://www.bilibili.com/video/${e.bvid}`)},openSearchPage(){e({url:"/pages/search/search"})}},async mounted(){await this.loadVideoData()}},[["render",function(e,f,y,_,w,T){const b=v,I=s,k=h;return o(),t(I,{class:"container"},{default:a((()=>[i(I,{class:"topNav"},{default:a((()=>[w.videoType?(o(),t(I,{key:0,class:"topNavScroll"},{default:a((()=>[(o(!0),l(c,null,d(w.videoType,((e,s)=>(o(),t(I,{key:s,class:"navSection"},{default:a((()=>[i(k,{"scroll-x":"true",style:{width:"100%","white-space":"nowrap"},"show-scrollbar":"false"},{default:a((()=>[(o(!0),l(c,null,d(e,(e=>(o(),t(I,{key:e,onClick:t=>T.handlePress(s,e),class:u(["navItem",{selectedNavItem:w.selectedItems[s]===e}])},{default:a((()=>[i(b,{class:u(["navItemText",{selectedNavItemText:w.selectedItems[s]===e}])},{default:a((()=>[m(p(e),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","class"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):r("",!0)])),_:1}),i(I,{class:"searchButton",onClick:T.openSearchPage},{default:a((()=>[n("img",{src:g,class:"searchIcon"})])),_:1},8,["onClick"]),i(k,{class:"videoList","scroll-y":"true",onScrolltolower:T.loadVideoData},{default:a((()=>[(o(!0),l(c,null,d(w.videoList,((e,s)=>(o(),t(I,{key:s,class:"videoItem",onClick:t=>T.goToVideoDetail(e)},{default:a((()=>[n("img",{class:"videoThumbnail",src:e.cover,mode:"aspectFill",referrerpolicy:"no-referrer"},null,8,["src"]),i(I,{class:"videoInfo"},{default:a((()=>[i(b,{class:"videoTitle"},{default:a((()=>[m(p(e.name),1)])),_:2},1024),i(I,{class:"infoRow"},{default:a((()=>[i(b,{class:"videoPublishTime"},{default:a((()=>[m(p(T.formatDate(e.publish_time)),1)])),_:2},1024),i(b,{class:"videoType"},{default:a((()=>[m(p(e.type),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["onScrolltolower"])])),_:1})}],["__scopeId","data-v-ba4a191a"]]);export{w as default};
