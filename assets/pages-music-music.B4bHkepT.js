import{n as e,l as s,m as a,f as t,w as l,i,o as c,a as o,c as u,r as n,F as r,g as d,b as m,d as h,e as g,t as A,j as p,S as Q,I as f,q as I,u as C,k as B}from"./index-BG5oA973.js";import{_ as S,a as k,b as E,c as q,s as M}from"./_plugin-vue_export-helper.Dl8SAmEZ.js";import{_ as b}from"./search.HyvIfahN.js";const T=""+new URL("detail-ZT6R3jgq.png",import.meta.url).href,R=""+new URL("close-Dt2xETQ4.png",import.meta.url).href,U=""+new URL("netease-D9urGBuq.png",import.meta.url).href,w=""+new URL("qqmusic-U0PToMQ4.png",import.meta.url).href;const F=S({data:()=>({musicList:[],playlist:[],currentTrack:null,isPlaying:!1,selectedItems:{album:"全部",solo:"全部",platform:"全部",music_type:"全部"},musicType:{},page:1,isModalVisible:!1,selectedMusic:{},currentTrack:null,isPlaying:!1,playMode:"listLoop",isDisplayList:!1,placeholderImage:"@/static/logo.png",audioCtx:null,searchQuery:"",tabBarHeight:0,env:"h5"}),methods:{async loadMusicData(){if(this.musicList.length>=this.total&&0!==this.total)return;if(this.searchQuery)return void(await this.performSearch());this.musicType=await k();for(const i in this.musicType)this.musicType[i].unshift("全部");this.musicType.platform=["全部","网易","腾讯系","Bilibili"],delete this.musicType.language;const{album:e,solo:s,platform:a,music_type:t}=this.selectedItems;var l=await E("全部"===e?[]:[e],"全部"===s?[]:[s],"全部"===a?[]:[{"网易":"netease","腾讯系":"qq_music",Bilibili:"bilibili"}[a]],"全部"===t?[]:[t],this.page);this.total=l.total,this.musicList=this.musicList.concat(l.data),this.page++},handlePress(e,s){this.selectedItems[e]=s,this.musicList=[],this.page=1,this.loadMusicData()},async handleDetailTrack(e){const s=await q(e);this.selectedMusic=s,this.toggleModal(!0)},toggleModal(e){this.isModalVisible=e},turnToNetease(){window.open("https://music.163.com/#/song?id="+this.selectedMusic.platform.netease)},turnToQQMusic(){window.open("https://y.qq.com/n/yqq/song/"+this.selectedMusic.platform.qq_music+".html")},openSearchPage(){e({url:"/pages/search/search"})},async performSearch(){if(!this.searchQuery)return void s({title:"请输入搜索内容",icon:"none"});this.musicList=[],this.page=1;const e=await M(this.searchQuery,this.page);for(this.total=e.total,this.musicList=e.data,this.page++;this.musicList.length<this.total;){const e=await M(this.searchQuery,this.page);this.musicList=this.musicList.concat(e.data),this.page++}}},async mounted(){"h5"===this.env?this.tabBarHeight=a().safeArea.bottom-a().windowHeight+a().safeAreaInsets.bottom:this.tabBarHeight=0,await this.loadMusicData()}},[["render",function(e,s,a,S,k,E){const q=p,M=i,F=Q,y=f,J=I,H=C;return c(),t(M,{class:"container"},{default:l((()=>[o(M,{class:"topNav"},{default:l((()=>[k.musicType?(c(),t(M,{key:0,class:"topNavScroll"},{default:l((()=>[(c(!0),u(r,null,n(k.musicType,((e,s)=>(c(),t(M,{key:s,class:"navSection"},{default:l((()=>[o(F,{"scroll-x":"true",style:{width:"100%","white-space":"nowrap"},"show-scrollbar":"false"},{default:l((()=>[(c(!0),u(r,null,n(e,(e=>(c(),t(M,{key:e,onClick:a=>E.handlePress(s,e),class:B(["navItem",{selectedNavItem:k.selectedItems[s]===e}])},{default:l((()=>[o(q,{class:B(["navItemText",{selectedNavItemText:k.selectedItems[s]===e}])},{default:l((()=>[h(A(e),1)])),_:2},1032,["class"])])),_:2},1032,["onClick","class"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})):d("",!0),o(M,{class:"searchBox"},{default:l((()=>[m("img",{src:"data:image/png;base64,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",class:"searchIconSmall"}),o(y,{class:"searchInput",type:"text",placeholder:"搜索音乐/歌手/创作者/关键词等信息",modelValue:k.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=e=>k.searchQuery=e)},null,8,["modelValue"]),o(J,{class:"searchButtonOne",onClick:E.performSearch},{default:l((()=>[h("搜索")])),_:1},8,["onClick"])])),_:1})])),_:1}),o(F,{class:"musicListContainer","scroll-y":"true","show-scrollbar":"false",onScrolltolower:s[1]||(s[1]=e=>E.loadMusicData())},{default:l((()=>[(c(!0),u(r,null,n(k.musicList,(e=>(c(),t(M,{key:e.id,class:"itemContainer"},{default:l((()=>[o(M,{class:"itemContent"},{default:l((()=>[o(q,{class:"title"},{default:l((()=>[h(A(e.name),1)])),_:2},1024),o(q,{class:"subtitle"},{default:l((()=>[h(A(e.album)+" "+A(e.solo)+" "+A(new Date(e.publish_time).toLocaleDateString()),1)])),_:2},1024)])),_:2},1024),o(M,{class:"actionButtons"},{default:l((()=>[m("img",{class:"detailButton",src:T,onClick:s=>E.handleDetailTrack(e.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),o(M,{class:"searchButton",onClick:E.openSearchPage,style:g({bottom:k.tabBarHeight/2+100+"px"})},{default:l((()=>[m("img",{src:b,class:"searchIcon"})])),_:1},8,["onClick","style"]),k.isModalVisible?(c(),t(M,{key:0,class:"modalContainer",style:g({bottom:k.tabBarHeight/2+"px"})},{default:l((()=>[o(M,{class:"modalContent"},{default:l((()=>[o(q,{class:"modalTitle"},{default:l((()=>[h(A(k.selectedMusic.name),1)])),_:1}),o(q,{class:"modalSubtitle"},{default:l((()=>[h(A(k.selectedMusic.album),1)])),_:1}),o(H,{src:k.selectedMusic.cover_url,class:"modalImage"},null,8,["src"]),o(F,{class:"modalDetails","scroll-y":"true"},{default:l((()=>[o(q,null,{default:l((()=>[h("演唱者："+A(k.selectedMusic.solo),1)])),_:1}),m("br"),o(q,null,{default:l((()=>[h("平台："+A(k.selectedMusic.platform.netease?k.selectedMusic.platform.qq_music?"全平台":"网易":"腾讯系"),1)])),_:1}),m("br"),o(q,null,{default:l((()=>[h("语言："+A(k.selectedMusic.language),1)])),_:1}),m("br"),o(q,null,{default:l((()=>[h("音乐类型："+A(k.selectedMusic.music_type),1)])),_:1}),m("br"),o(q,null,{default:l((()=>[h("有无PV&MV："+A(k.selectedMusic.pv_mv?k.selectedMusic.pv_mv:"无"),1)])),_:1}),m("br"),(c(!0),u(r,null,n(k.selectedMusic.staff,(e=>(c(),t(q,null,{default:l((()=>[h(A(e.type)+"："+A(e.name)+"\\n",1)])),_:2},1024)))),256)),o(q,null,{default:l((()=>[h("备注："+A(k.selectedMusic.note)+"\\n",1)])),_:1}),o(q,null,{default:l((()=>[h("发布日期："+A(new Date(k.selectedMusic.publish_time).toLocaleDateString()),1)])),_:1}),m("br")])),_:1}),m("img",{class:"closeButton",src:R,onClick:s[2]||(s[2]=e=>E.toggleModal(!1))}),k.selectedMusic.platform.netease?(c(),t(M,{key:0,class:"addToNext",onClick:s[3]||(s[3]=e=>E.turnToNetease())},{default:l((()=>[m("img",{class:"nextPlayIcon",src:U}),o(q,null,{default:l((()=>[h("跳转到网易云播放")])),_:1})])),_:1})):d("",!0),k.selectedMusic.platform.qq_music?(c(),t(M,{key:1,class:"addToEnd",onClick:s[4]||(s[4]=e=>E.turnToQQMusic())},{default:l((()=>[o(q,null,{default:l((()=>[h("跳转到QQ音乐播放")])),_:1}),m("img",{class:"addToPlaylistIcon",src:w})])),_:1})):d("",!0)])),_:1})])),_:1},8,["style"])):d("",!0)])),_:1})}],["__scopeId","data-v-fd751062"]]);export{F as default};
